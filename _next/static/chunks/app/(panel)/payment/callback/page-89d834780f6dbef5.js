(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6037],{1002:(e,s,t)=>{Promise.resolve().then(t.bind(t,5984))},5695:(e,s,t)=>{"use strict";var a=t(8999);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},5984:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var a=t(5155),l=t(5695),r=t(2115),n=t(8406),i=t(6874),c=t.n(i);function d(){let e=(0,l.useSearchParams)(),s=(0,l.useRouter)(),{isLoggedIn:t}=(0,n.A)(),[i,d]=(0,r.useState)("loading"),[o,x]=(0,r.useState)(null),[m,h]=(0,r.useState)([]);(0,r.useEffect)(()=>{if(!t){s.push("/");return}let a=e.get("Authority")||e.get("authority");u(a,e.get("Status")||e.get("status"),e.get("orderId"))},[e,t,s]);let u=async(e,s,t)=>{try{let a=await fetch("/api/payment/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authority:e,status:s,orderId:t})}),l=await a.json();l.success?(d("success"),x(l.order),h(l.giftCodes||[])):d("failed")}catch(e){console.error("Verification error:",e),d("failed")}};return"loading"===i?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-6 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-400",children:"در حال بررسی پرداخت..."})]})}):"success"===i?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-6 sm:p-8 lg:p-12",children:(0,a.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-full bg-green-500/20 flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("svg",{className:"w-10 h-10 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-slate-100 mb-2",children:"پرداخت موفقیت‌آمیز بود!"}),(0,a.jsx)("p",{className:"text-slate-400",children:"کدهای گیفت کارت شما آماده است"})]}),(0,a.jsxs)("div",{className:"glass-panel rounded-2xl p-6 sm:p-8 mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-slate-100 mb-6",children:"کدهای گیفت کارت"}),(0,a.jsx)("div",{className:"space-y-4",children:m.map((e,s)=>(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("span",{className:"text-sm text-slate-400",children:["کد ",s+1,":"]}),(0,a.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(e),alert("کد کپی شد!")},className:"text-xs text-cyan-400 hover:text-cyan-300",children:"کپی"})]}),(0,a.jsx)("div",{className:"font-mono text-lg font-semibold text-slate-100 text-center py-2 bg-slate-900/50 rounded-lg",children:e})]},s))}),(0,a.jsx)("div",{className:"mt-6 p-4 rounded-xl bg-yellow-500/10 border border-yellow-500/20",children:(0,a.jsx)("p",{className:"text-sm text-yellow-300",children:"⚠️ لطفا کدها را در جای امنی ذخیره کنید. این کدها فقط یک بار نمایش داده می‌شوند."})})]}),o&&(0,a.jsxs)("div",{className:"glass-panel rounded-2xl p-6 sm:p-8 mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-slate-100 mb-4",children:"اطلاعات سفارش"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-slate-400",children:"محصول:"}),(0,a.jsxs)("span",{className:"text-slate-200",children:["گیفت کارت ",o.brand]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-slate-400",children:"مبلغ:"}),(0,a.jsxs)("span",{className:"text-slate-200",children:[o.totalPrice," تومان"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-slate-400",children:"شماره سفارش:"}),(0,a.jsx)("span",{className:"text-slate-200 font-mono",children:o.orderId})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsx)(c(),{href:"/dashboard",className:"flex-1 px-6 py-3 bg-gradient-to-r from-cyan-500 to-purple-600 text-white font-semibold rounded-xl hover:shadow-lg hover:shadow-cyan-500/25 transition-all text-center",children:"بازگشت به داشبورد"}),(0,a.jsx)(c(),{href:"/gift-cards",className:"flex-1 px-6 py-3 bg-white/5 text-slate-200 font-semibold rounded-xl border border-white/10 hover:bg-white/10 transition-all text-center",children:"خرید بیشتر"})]})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-6 sm:p-8 lg:p-12",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-full bg-red-500/20 flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("svg",{className:"w-10 h-10 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-slate-100 mb-2",children:"پرداخت ناموفق بود"}),(0,a.jsx)("p",{className:"text-slate-400",children:"متاسفانه پرداخت شما انجام نشد"})]}),(0,a.jsxs)("div",{className:"glass-panel rounded-2xl p-6 sm:p-8 mb-6",children:[(0,a.jsx)("p",{className:"text-slate-300 mb-4",children:"ممکن است به دلایل زیر پرداخت انجام نشده باشد:"}),(0,a.jsxs)("ul",{className:"space-y-2 text-slate-400 text-sm",children:[(0,a.jsx)("li",{children:"• موجودی حساب کافی نبود"}),(0,a.jsx)("li",{children:"• اطلاعات کارت بانکی صحیح نبود"}),(0,a.jsx)("li",{children:"• تراکنش توسط بانک رد شد"}),(0,a.jsx)("li",{children:"• خطا در اتصال به درگاه پرداخت"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsx)("button",{onClick:()=>s.back(),className:"flex-1 px-6 py-3 bg-gradient-to-r from-cyan-500 to-purple-600 text-white font-semibold rounded-xl hover:shadow-lg hover:shadow-cyan-500/25 transition-all",children:"تلاش مجدد"}),(0,a.jsx)(c(),{href:"/gift-cards",className:"flex-1 px-6 py-3 bg-white/5 text-slate-200 font-semibold rounded-xl border border-white/10 hover:bg-white/10 transition-all text-center",children:"بازگشت به لیست"})]})]})})}function o(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-6 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-400",children:"در حال بارگذاری..."})]})}),children:(0,a.jsx)(d,{})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[6874,8406,8441,1684,7358],()=>s(1002)),_N_E=e.O()}]);