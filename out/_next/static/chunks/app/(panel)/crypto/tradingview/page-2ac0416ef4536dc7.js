(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3495],{7352:(e,i,t)=>{Promise.resolve().then(t.bind(t,7906))},7906:(e,i,t)=>{"use strict";t.r(i),t.d(i,{default:()=>n});var r=t(5155),l=t(2115);function n(){let e=(0,l.useRef)(null),i=(0,l.useRef)(!1),t=(0,l.useRef)(!1),[n,s]=(0,l.useState)(!0),[o,a]=(0,l.useState)(null),d=()=>{if(i.current){console.log("[TradingView] initializeWidget: Already initialized, skipping");return}if(!window.TradingView){console.log("[TradingView] initializeWidget: window.TradingView not available");return}if(!e.current){console.log("[TradingView] initializeWidget: containerRef.current is null");return}console.log("[TradingView] initializeWidget: Starting widget initialization"),i.current=!0;try{let i=document.getElementById("tradingview-widget-container");i&&(i.innerHTML="",console.log("[TradingView] Container cleared")),new window.TradingView.widget({autosize:!0,symbol:"BINANCE:BTCUSDT",interval:"D",timezone:"Asia/Tehran",theme:"dark",style:"1",locale:"fa_IR",toolbar_bg:"#1e293b",enable_publishing:!1,allow_symbol_change:!0,container_id:"tradingview-widget-container",hide_side_toolbar:!1,studies:["Volume@tv-basicstudies"],show_popup_button:!0,popup_width:"1000",popup_height:"650",no_referral_id:!0,referral_id:"",overrides:{"paneProperties.background":"#0f172a","paneProperties.backgroundType":"solid"}}),console.log("[TradingView] Widget created, checking for iframe..."),setTimeout(()=>{var i;let t=null===(i=e.current)||void 0===i?void 0:i.querySelector("iframe");t?(console.log("[TradingView] Iframe found:",t),t.style.width="100%",t.style.height="640px",t.style.minHeight="640px",t.style.display="block",s(!1),a(null)):console.warn("[TradingView] Iframe not found after widget creation")},100)}catch(e){console.error("[TradingView] Initialization error:",e),a("خطا در راه‌اندازی نمودار"),s(!1),i.current=!1}};return(0,l.useEffect)(()=>{if(console.log("[TradingView] useEffect: Component mounted"),window.TradingView)console.log("[TradingView] Script already loaded"),setTimeout(()=>{e.current&&d()},100);else{let i=document.querySelector('script[src="https://s3.tradingview.com/tv.js"]');if(i)console.log("[TradingView] Script already in DOM, waiting for load"),i.addEventListener("load",()=>{console.log("[TradingView] Existing script loaded"),setTimeout(()=>{e.current&&d()},100)});else{console.log("[TradingView] Loading script from https://s3.tradingview.com/tv.js");let i=document.createElement("script");i.src="https://s3.tradingview.com/tv.js",i.async=!0,i.onload=()=>{console.log("[TradingView] Script loaded successfully"),window.TradingView&&e.current?setTimeout(()=>{d()},100):(console.error("[TradingView] Script loaded but window.TradingView not available"),a("خطا در بارگذاری TradingView"),s(!1))},i.onerror=()=>{console.error("[TradingView] Script failed to load"),a("خطا در بارگذاری اسکریپت TradingView"),s(!1)},document.head.appendChild(i)}}let i=setTimeout(()=>{if(!t.current){var i;(null===(i=e.current)||void 0===i?void 0:i.querySelector("iframe"))?console.log("[TradingView] Iframe found after 2 seconds check"):(console.error("[TradingView] Iframe not found after 2 seconds"),a("TradingView blocked or failed to load (check AdBlock/CSP/Network).")),s(!1),t.current=!0}},2e3),r=()=>{if(e.current){let i=e.current.querySelector("iframe");i&&(i.style.width="100%")}};return window.addEventListener("resize",r),()=>{clearTimeout(i),window.removeEventListener("resize",r)}},[]),(0,r.jsx)("div",{className:"p-4 sm:p-6 lg:p-8 w-full",children:(0,r.jsxs)("div",{className:"w-full max-w-full",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-slate-100 mb-2",children:"تریدینگ ویو"}),(0,r.jsx)("p",{className:"text-slate-400",children:"نمودارهای زنده و تحلیل بازار ارزهای دیجیتال"})]}),(0,r.jsxs)("div",{className:"glass-panel rounded-2xl p-4 sm:p-6 w-full relative",style:{overflow:"visible"},children:[(0,r.jsx)("div",{id:"tradingview-widget-container",ref:e,className:"w-full",style:{minHeight:"640px",height:"640px",width:"100%",overflow:"visible",position:"relative"}}),n&&(0,r.jsx)("div",{className:"absolute inset-0 w-full h-full bg-slate-800/80 backdrop-blur-sm rounded-xl flex items-center justify-center",style:{minHeight:"640px",zIndex:10,pointerEvents:"auto"},children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-slate-400",children:"در حال بارگذاری نمودار..."})]})}),o&&!n&&(0,r.jsx)("div",{className:"absolute inset-0 w-full h-full bg-red-500/20 border-2 border-red-500/50 rounded-xl flex items-center justify-center",style:{minHeight:"640px",zIndex:10,pointerEvents:"auto"},children:(0,r.jsxs)("div",{className:"text-center bg-slate-900/90 p-6 rounded-xl",children:[(0,r.jsx)("p",{className:"text-red-400 mb-4 text-lg font-semibold",children:o}),(0,r.jsx)("button",{onClick:()=>{console.log("[TradingView] Retry clicked"),a(null),s(!0),t.current=!1,i.current=!1,window.TradingView&&e.current?setTimeout(()=>{d()},100):(console.log("[TradingView] Reloading page to reload script"),window.location.reload())},className:"px-6 py-3 bg-red-500/30 text-red-300 border border-red-500/50 rounded-lg hover:bg-red-500/40 transition-colors font-medium",children:"تلاش مجدد"})]})})]}),(0,r.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"glass-panel rounded-xl p-4",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-slate-300 mb-2",children:"نمودار زنده"}),(0,r.jsx)("p",{className:"text-xs text-slate-400",children:"قیمت‌های لحظه‌ای و تحلیل تکنیکال پیشرفته"})]}),(0,r.jsxs)("div",{className:"glass-panel rounded-xl p-4",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-slate-300 mb-2",children:"ابزارهای حرفه‌ای"}),(0,r.jsx)("p",{className:"text-xs text-slate-400",children:"دسترسی به تمام ابزارهای تحلیل و اندیکاتورها"})]}),(0,r.jsxs)("div",{className:"glass-panel rounded-xl p-4",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-slate-300 mb-2",children:"پشتیبانی 24/7"}),(0,r.jsx)("p",{className:"text-xs text-slate-400",children:"پشتیبانی کامل برای استفاده از پلتفرم"})]})]})]})})}}},e=>{var i=i=>e(e.s=i);e.O(0,[8441,1684,7358],()=>i(7352)),_N_E=e.O()}]);